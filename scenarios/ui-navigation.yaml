# UI Navigation Test Scenarios
# Tests for navigating through all tabs and verifying UI components load correctly

name: "UI Navigation Tests"
description: "Comprehensive navigation tests for all tabs in the Your Application SPA"
version: "1.0.0"

# Test configuration
config:
  timeout: 90000  # 1.5 minutes for UI operations
  retries: 2
  parallel: false
  
# Environment requirements
environment:
  requires:
    - ELECTRON_APP_PATH
  optional:
    - APP_CONFIG
    - NEO4J_PASSWORD
    - NEO4J_PORT

# Agents involved in this scenario
agents:
  - name: "ui-agent"
    type: "ui"
    config:
      browser: "chromium"
      headless: false
      viewport:
        width: 1280
        height: 720
      timeout: 30000
      slowMo: 500  # Slow down actions for stability

# Test steps
steps:
  # Initialize the application
  - name: "Launch Electron App"
    agent: "ui-agent"
    action: "launch_electron"
    params:
      executablePath: "${ELECTRON_APP_PATH}"
      args: ["--no-sandbox", "--disable-dev-shm-usage", "--disable-web-security"]
    timeout: 20000
    
  # Wait for app to fully load
  - name: "Wait for App Initialization"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='app-container']"
      state: "visible"
      timeout: 15000
    
  # Test Build Tab Navigation
  - name: "Navigate to Build Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-build']"
    wait_for:
      selector: "[data-testid='build-form']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Build Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='config-input']"
      state: "visible"
      timeout: 5000
      
  # Test Generate Spec Tab Navigation
  - name: "Navigate to Generate Spec Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-generate-spec']"
    wait_for:
      selector: "[data-testid='generate-spec-form']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Generate Spec Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='spec-template-select']"
      state: "visible"
      timeout: 5000
      
  # Test Generate IaC Tab Navigation
  - name: "Navigate to Generate IaC Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-generate-iac']"
    wait_for:
      selector: "[data-testid='generate-iac-form']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Generate IaC Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='iac-format-select']"
      state: "visible"
      timeout: 5000
      
  # Test Create Tenant Tab Navigation
  - name: "Navigate to Create Tenant Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-create-tenant']"
    wait_for:
      selector: "[data-testid='create-tenant-form']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Create Tenant Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='tenant-spec-upload']"
      state: "visible"
      timeout: 5000
      
  # Test Visualize Tab Navigation
  - name: "Navigate to Visualize Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-visualize']"
    wait_for:
      selector: "[data-testid='visualize-container']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Visualize Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='graph-canvas'], [data-testid='no-data-message']"
      state: "visible"
      timeout: 5000
      
  # Test Agent Mode Tab Navigation
  - name: "Navigate to Agent Mode Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-agent-mode']"
    wait_for:
      selector: "[data-testid='agent-mode-container']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Agent Mode Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='agent-chat-interface']"
      state: "visible"
      timeout: 5000
      
  # Test Threat Model Tab Navigation
  - name: "Navigate to Threat Model Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-threat-model']"
    wait_for:
      selector: "[data-testid='threat-model-container']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Threat Model Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='threat-analysis-form']"
      state: "visible"
      timeout: 5000
      
  # Test Configuration Tab Navigation
  - name: "Navigate to Configuration Tab"
    agent: "ui-agent"
    action: "click"
    params:
      selector: "[data-testid='tab-config']"
    wait_for:
      selector: "[data-testid='config-form']"
      state: "visible"
      timeout: 5000
      
  - name: "Verify Configuration Tab Content"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='azure-credentials-section']"
      state: "visible"
      timeout: 5000
      
  # Test tab switching back and forth
  - name: "Test Rapid Tab Switching"
    agent: "ui-agent"
    action: "multi_action"
    params:
      actions:
        - action: "click"
          selector: "[data-testid='tab-build']"
          wait: 1000
        - action: "click"
          selector: "[data-testid='tab-visualize']"
          wait: 1000
        - action: "click"
          selector: "[data-testid='tab-config']"
          wait: 1000
        - action: "click"
          selector: "[data-testid='tab-build']"
          wait: 1000
          
  # Verify final state
  - name: "Verify Final Tab State"
    agent: "ui-agent"
    action: "wait_for_element"
    params:
      selector: "[data-testid='build-form']"
      state: "visible"
      timeout: 5000

# Assertions to validate test success
assertions:
  - name: "All Tabs Are Accessible"
    type: "elements_exist"
    agent: "ui-agent"
    params:
      selectors:
        - "[data-testid='tab-build']"
        - "[data-testid='tab-generate-spec']"
        - "[data-testid='tab-generate-iac']"
        - "[data-testid='tab-create-tenant']"
        - "[data-testid='tab-visualize']"
        - "[data-testid='tab-agent-mode']"
        - "[data-testid='tab-threat-model']"
        - "[data-testid='tab-config']"
        
  - name: "Build Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='build-form']"
      
  - name: "Generate Spec Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='generate-spec-form']"
      
  - name: "Generate IaC Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='generate-iac-form']"
      
  - name: "Create Tenant Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='create-tenant-form']"
      
  - name: "Visualize Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='visualize-container']"
      
  - name: "Agent Mode Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='agent-mode-container']"
      
  - name: "Threat Model Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='threat-model-container']"
      
  - name: "Configuration Tab Content Loads"
    type: "element_visible"
    agent: "ui-agent"
    params:
      selector: "[data-testid='config-form']"
      
  - name: "No JavaScript Errors Present"
    type: "no_console_errors"
    agent: "ui-agent"
    params:
      severity: "error"

# Cleanup actions
cleanup:
  - name: "Close Application"
    agent: "ui-agent"
    action: "close_app"

# Test metadata
metadata:
  tags:
    - "ui"
    - "navigation"
    - "tabs"
    - "smoke-test"
  priority: "high"
  author: "agentic-testing-system"
  created: "2024-09-03T00:00:00Z"
  updated: "2024-09-03T00:00:00Z"